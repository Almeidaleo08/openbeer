{% extends "_user_base.html.j2" %}
{% block base %}
  {{ super() }}
{% endblock base %}

{% block body %}
<table class="ui center aligned table">
  <thead>
    <th></th>
    <th>Imagem</th>
    <th>Nome</th>
    <th>Descrição</th>
    <th>Preço</th>
    <th>Quantidade</th>
    <th>Valor Total</th>
  </thead>
<form class="" action="{{url_for('select_items_return')}}" method="post">
  {% for item in items %}
    <tbody>
      {% if item.returned == True %}
            {% if item.confirm_return %}
              <tr class="ui success message">
                <input type="text" hidden name="order_id" value="{{item.order_id}}">
                <td>Produto já devolvido</td>
            {% else %}
              <tr class="ui error message">
                <input type="text" hidden name="order_id" value="{{item.order_id}}">
                <td>Devolução Já solicitada</td>
            {% endif %}
          {% if item.item.beer_id %}
            <td><img src="../../static/images/{{item.item.beer.image}}" style="width: 50px;"></td>
            <td>{{item.item.beer.name}}</td>
            <td>{{item.item.beer.description}}</td>
            <td>R${{item.item.beer.value}}0</td>
          {% else %}
            <td><img src="../../static/images/{{item.item.snack.image}}" style="width: 50px;"></td>
            <td>{{item.item.snack.name}}</td>
            <td>{{item.item.snack.description}}</td>
            <td>R${{item.item.snack.value}}0</td>
          {% endif %}
          <td>{{item.item.quantity}}</td>
          <td>R${{item.item.value}}0</td>
        </tr>
      {% else %}
        <tr>
            <input type="text" hidden name="order_id" value="{{item.order_id}}">
            <td><input type="checkbox" name="selected_itens" class="checkbox" value="{{item.item.id}}"></td>
          {% if item.item.beer_id %}
            <td><img src="../../static/images/{{item.item.beer.image}}" style="width: 50px;"></td>
            <td>{{item.item.beer.name}}</td>
            <td>{{item.item.beer.description}}</td>
            <td>R${{item.item.beer.value}}0</td>
          {% else %}
            <td><img src="../../static/images/{{item.item.snack.image}}" style="width: 50px;"></td>
            <td>{{item.item.snack.name}}</td>
            <td>{{item.item.snack.description}}</td>
            <td>R${{item.item.snack.value}}0</td>
          {% endif %}
          <td>{{item.item.quantity}}</td>
          <td>R${{item.item.value}}0</td>
        </tr>
      {% endif %}
    </tbody>
  {% endfor %}
</table>
  <button type="submit" id="return_button" class="ui teal button" disabled>Solicitar Troca</button>
</form>

<script type="text/javascript">
  function return_item(id) {
    $('#devo'+id).modal('show');
  };

  $(".checkbox").click(function() {
    if (this.checked == true) {
       $("#return_button").removeAttr("disabled");
    } else {
       $("#return_button").attr("disabled", "disabled");
    }
});

</script>

{% endblock body %}
